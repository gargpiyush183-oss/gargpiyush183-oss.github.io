<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Big Bash League Dashboard (2011‚Äì2025)</title>

  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Russo+One&family=Open+Sans:wght@400;600;700&display=swap');

    body { font-family: 'Open Sans', sans-serif; }

    .hero-gradient {
      background: radial-gradient(1200px 600px at 20% 10%, rgba(34,211,238,0.18), transparent 60%),
                  radial-gradient(900px 500px at 80% 30%, rgba(251,191,36,0.14), transparent 55%),
                  linear-gradient(135deg, #0b1220 0%, #111827 45%, #0b1220 100%);
    }

    .glow-text { text-shadow: 0 0 18px rgba(251,191,36,0.25); }

    .card-hover { transition: transform 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease; }
    .card-hover:hover { transform: translateY(-6px); box-shadow: 0 18px 40px rgba(0,0,0,0.35); }

    .animate-float { animation: float 3.2s ease-in-out infinite; }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }

    .cricket-ball { animation: spin 4s linear infinite; }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

    .progress-bar { transition: width 1.2s ease-out; width: 0; }

    html { scroll-behavior: smooth; }

    /* === Schedule Section Styles === */
    .team-scorchers { background: linear-gradient(135deg, #F7511D 0%, #FF8C00 100%); }
    .team-sixers { background: linear-gradient(135deg, #FF00FF 0%, #9B30FF 100%); }
    .team-renegades { background: linear-gradient(135deg, #CC0000 0%, #8B0000 100%); }
    .team-heat { background: linear-gradient(135deg, #00B7EB 0%, #006699 100%); }
    .team-hurricanes { background: linear-gradient(135deg, #6B238E 0%, #9932CC 100%); }
    .team-thunder { background: linear-gradient(135deg, #00FF00 0%, #32CD32 100%); }
    .team-strikers { background: linear-gradient(135deg, #0066CC 0%, #003366 100%); }
    .team-stars { background: linear-gradient(135deg, #00A651 0%, #006400 100%); }
    .team-tbd { background: linear-gradient(135deg, #6B7280 0%, #374151 100%); }
    .match-card:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(0,0,0,0.2); }
    .playoff-card { border: 2px solid #FFD700; }
    .completed-checkbox { cursor: pointer; transition: all 0.3s ease; }
    .completed-checkbox:hover { transform: scale(1.05); }
    .completed-checkbox.checked { background-color: #DC2626 !important; border-color: #DC2626 !important; }
    .completed-checkbox.checked .checkmark { display: block; }
    .prediction-btn { transition: all 0.2s ease; }
    .prediction-btn:hover { transform: scale(1.02); }
    .prediction-btn.selected { ring: 2px; }
    .result-success { background: linear-gradient(135deg, #10B981 0%, #059669 100%); animation: pulse-success 2s infinite; }
    .result-fail { background: linear-gradient(135deg, #EF4444 0%, #DC2626 100%); }
    @keyframes pulse-success {
        0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4); }
        50% { box-shadow: 0 0 0 8px rgba(16, 185, 129, 0); }
    }
  </style>
</head>

<body class="bg-gray-950 text-white">
  <!-- Top Nav -->
  <nav class="sticky top-0 z-40 backdrop-blur bg-gray-950/70 border-b border-white/5">
    <div class="max-w-7xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#top" class="flex items-center gap-3">
        <span class="text-2xl">üèè</span>
        <div>
          <div class="font-bold leading-tight" style="font-family: 'Russo One', sans-serif;">BBL Dashboard</div>
          <div class="text-xs text-gray-400">2011‚Äì2025 dataset</div>
        </div>
      </a>
      <div class="hidden md:flex items-center gap-2 text-sm">
        <a class="px-3 py-2 rounded-lg hover:bg-white/5 text-gray-200" href="#trends">Trends</a>
        <a class="px-3 py-2 rounded-lg hover:bg-white/5 text-gray-200" href="#stats">Stats</a>
        <a class="px-3 py-2 rounded-lg hover:bg-white/5 text-gray-200" href="#squads">Squads</a>
        <a class="px-3 py-2 rounded-lg hover:bg-white/5 text-gray-200" href="#performers">Performers</a>
        <a class="px-3 py-2 rounded-lg hover:bg-white/5 text-gray-200" href="#predictor">Predictor</a>
        <a class="px-3 py-2 rounded-lg hover:bg-white/5 text-gray-200" href="#champions">Champions</a>
        <a class="px-3 py-2 rounded-lg hover:bg-white/5 text-gray-200" href="#schedule">Schedule</a>
      </div>
      <a href="#predictor" class="inline-flex items-center gap-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black font-bold px-4 py-2 rounded-xl hover:from-yellow-500 hover:to-orange-600 transition">
        <i class="fas fa-wand-magic-sparkles"></i>
        Try Predictor
      </a>
    </div>
  </nav>

  <!-- Hero -->
  <header id="top" class="hero-gradient min-h-[78vh] flex items-center justify-center relative overflow-hidden">
    <div class="absolute inset-0 opacity-20 pointer-events-none">
      <div class="absolute top-14 left-12 text-8xl">üèè</div>
      <div class="absolute bottom-10 right-10 text-8xl cricket-ball">üèê</div>
      <div class="absolute top-1/2 left-1/4 text-6xl animate-float">‚≠ê</div>
      <div class="absolute top-1/3 right-1/4 text-6xl animate-float" style="animation-delay: 1s;">‚≠ê</div>
    </div>

    <div class="max-w-5xl mx-auto px-4 text-center relative z-10">
      <h1 class="text-4xl md:text-7xl font-bold mb-4 glow-text" style="font-family: 'Russo One', sans-serif;">
        <span class="text-yellow-400">BIG BASH</span>
        <span class="text-cyan-400">LEAGUE</span>
      </h1>
      <p class="text-lg md:text-2xl text-gray-300">Complete Dataset Dashboard</p>
      <p class="text-sm md:text-base text-gray-400 mt-1">Seasons 2011‚Äì2025 ‚Ä¢ Visual trends ‚Ä¢ Squads ‚Ä¢ Predictor</p>

      <div id="modelAccuracyContainer" class="hidden mt-6 mb-2 bg-black/40 backdrop-blur-md border border-yellow-400/30 rounded-2xl p-4 inline-block animate-float shadow-[0_0_15px_rgba(250,204,21,0.3)]">
        <p class="text-xs text-gray-300 uppercase tracking-widest mb-1 font-bold">Model Accuracy</p>
        <div class="text-5xl font-black text-yellow-400" style="font-family: 'Russo One', sans-serif;" id="modelAccuracyDisplay">--%</div>
        <p class="text-xs text-gray-400 mt-1" id="modelAccuracyDetails">0/0 correct</p>
      </div>

      <div class="mt-8 flex flex-wrap justify-center gap-3">
        <a href="#trends" class="bg-cyan-500 hover:bg-cyan-400 text-black font-bold py-3 px-6 rounded-xl transition">
          <i class="fas fa-chart-line mr-2"></i>Trends
        </a>
        <a href="#stats" class="bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-xl transition border border-white/10">
          <i class="fas fa-chart-pie mr-2"></i>Stats
        </a>
        <a href="#squads" class="bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-xl transition border border-white/10">
          <i class="fas fa-users mr-2"></i>Squads
        </a>
        <a href="#predictor" class="bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-black font-bold py-3 px-6 rounded-xl transition">
          <i class="fas fa-magic mr-2"></i>Match Predictor
        </a>
        <a href="#schedule" class="bg-gray-800 hover:bg-gray-700 text-white font-bold py-3 px-6 rounded-xl transition border border-white/10">
          <i class="fas fa-calendar-alt mr-2"></i>Schedule
        </a>
      </div>

      <div class="mt-8 text-xs text-gray-400">
        Note: Live Score, Standings and Schedule sections were merged.
      </div>
    </div>

    <div class="absolute bottom-6 left-1/2 -translate-x-1/2 text-gray-400 animate-bounce">
      <i class="fas fa-chevron-down"></i>
    </div>
  </header>

  <main>
    <!-- Trends -->
    <section id="trends" class="py-16 bg-gradient-to-b from-gray-950 to-gray-900">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-10">
          <h2 class="text-3xl md:text-4xl font-bold">
            <span class="text-cyan-400">üìà</span> Common Trends & Similarities
          </h2>
          <p class="text-gray-400 mt-2 max-w-3xl mx-auto">A quick visual summary of match patterns across the BBL dataset (2011‚Äì2025).</p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-10">
          <div class="card-hover bg-gradient-to-br from-blue-600 to-blue-800 rounded-2xl p-5 text-center">
            <div class="text-3xl mb-2">üéØ</div>
            <div class="text-3xl font-bold">54%</div>
            <div class="text-blue-200 text-sm">Chasing Team Wins</div>
          </div>
          <div class="card-hover bg-gradient-to-br from-green-600 to-green-800 rounded-2xl p-5 text-center">
            <div class="text-3xl mb-2">üè†</div>
            <div class="text-3xl font-bold">62%</div>
            <div class="text-green-200 text-sm">Home Team Advantage</div>
          </div>
          <div class="card-hover bg-gradient-to-br from-yellow-600 to-yellow-800 rounded-2xl p-5 text-center">
            <div class="text-3xl mb-2">ü™ô</div>
            <div class="text-3xl font-bold">51%</div>
            <div class="text-yellow-200 text-sm">Toss Winner Wins</div>
          </div>
          <div class="card-hover bg-gradient-to-br from-pink-600 to-pink-800 rounded-2xl p-5 text-center">
            <div class="text-3xl mb-2">üåô</div>
            <div class="text-3xl font-bold">58%</div>
            <div class="text-pink-200 text-sm">Night Match Chase</div>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
          <div class="bg-gray-900 rounded-2xl p-6 border border-white/10">
            <h3 class="text-lg font-bold mb-3 text-yellow-300">Scoring trends by over phase</h3>
            <canvas id="scoringTrendsChart" height="140"></canvas>
          </div>
          <div class="bg-gray-900 rounded-2xl p-6 border border-white/10">
            <h3 class="text-lg font-bold mb-3 text-cyan-300">Win rate by scenario</h3>
            <canvas id="winRateChart" height="140"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Stats -->
    <section id="stats" class="py-16 bg-gray-950">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-10">
          <h2 class="text-3xl md:text-4xl font-bold">
            <span class="text-yellow-400">League</span> Statistics <span class="text-gray-500 text-xl">(2011‚Äì2025)</span>
          </h2>
          <p class="text-gray-400 mt-2">High-level totals and distribution charts.</p>
        </div>

        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-12">
          <div class="card-hover bg-gradient-to-br from-purple-600 to-purple-800 rounded-2xl p-6 text-center">
            <i class="fas fa-cricket-bat-ball text-3xl mb-3 text-purple-200"></i>
            <div class="text-4xl font-bold stat-counter" data-target="868">0</div>
            <p class="text-purple-200">Total Matches</p>
          </div>
          <div class="card-hover bg-gradient-to-br from-cyan-600 to-cyan-800 rounded-2xl p-6 text-center">
            <i class="fas fa-running text-3xl mb-3 text-cyan-200"></i>
            <div class="text-4xl font-bold stat-counter" data-target="142856">0</div>
            <p class="text-cyan-200">Total Runs</p>
          </div>
          <div class="card-hover bg-gradient-to-br from-orange-600 to-orange-800 rounded-2xl p-6 text-center">
            <i class="fas fa-bullseye text-3xl mb-3 text-orange-200"></i>
            <div class="text-4xl font-bold stat-counter" data-target="5124">0</div>
            <p class="text-orange-200">Total Wickets</p>
          </div>
          <div class="card-hover bg-gradient-to-br from-green-600 to-green-800 rounded-2xl p-6 text-center">
            <i class="fas fa-bolt text-3xl mb-3 text-green-200"></i>
            <div class="text-4xl font-bold stat-counter" data-target="5892">0</div>
            <p class="text-green-200">Total Sixes</p>
          </div>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
          <div class="bg-gray-900 rounded-2xl p-6 border border-white/10">
            <h3 class="text-lg font-bold mb-3 text-yellow-300">Matches per season</h3>
            <canvas id="matchesChart" height="150"></canvas>
          </div>
          <div class="bg-gray-900 rounded-2xl p-6 border border-white/10">
            <h3 class="text-lg font-bold mb-3 text-cyan-300">Team titles won (all-time)</h3>
            <canvas id="titlesChart" height="150"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Squads -->
    <section id="squads" class="py-16 bg-gradient-to-b from-gray-950 to-gray-900">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-10">
          <h2 class="text-3xl md:text-4xl font-bold"><span class="text-cyan-400">üë•</span> BBL 2025‚Äì26 Squads</h2>
          <p class="text-gray-400 mt-2">Updated squads with contracted, replacement and marquee players.</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6" id="squadsContainer"></div>
      </div>
    </section>

    <!-- Performers -->
    <section id="performers" class="py-16 bg-gray-950">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-10">
          <h2 class="text-3xl md:text-4xl font-bold"><span class="text-orange-400">Top</span> Performers <span class="text-gray-500 text-xl">(All Time)</span></h2>
          <p class="text-gray-400 mt-2">A quick look at all-time leaders (static snapshot).</p>
        </div>

        <div class="grid md:grid-cols-2 gap-6">
          <div class="bg-gray-900 rounded-2xl p-6 border border-white/10">
            <h3 class="text-lg font-bold mb-5 flex items-center">
              <i class="fas fa-running text-yellow-400 mr-3"></i> Top Run Scorers
            </h3>
            <div class="space-y-4">
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">Glenn Maxwell</span><span class="text-yellow-400">2986 runs</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-yellow-400 h-3 rounded-full progress-bar" data-width="100%"></div></div>
              </div>
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">Chris Lynn</span><span class="text-yellow-400">2879 runs</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-yellow-400 h-3 rounded-full progress-bar" data-width="96%"></div></div>
              </div>
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">D'Arcy Short</span><span class="text-yellow-400">2654 runs</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-yellow-400 h-3 rounded-full progress-bar" data-width="89%"></div></div>
              </div>
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">Marcus Stoinis</span><span class="text-yellow-400">2521 runs</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-yellow-400 h-3 rounded-full progress-bar" data-width="84%"></div></div>
              </div>
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">Josh Philippe</span><span class="text-yellow-400">2198 runs</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-yellow-400 h-3 rounded-full progress-bar" data-width="74%"></div></div>
              </div>
            </div>
          </div>

          <div class="bg-gray-900 rounded-2xl p-6 border border-white/10">
            <h3 class="text-lg font-bold mb-5 flex items-center">
              <i class="fas fa-bullseye text-cyan-400 mr-3"></i> Top Wicket Takers
            </h3>
            <div class="space-y-4">
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">Sean Abbott</span><span class="text-cyan-400">127 wickets</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-cyan-400 h-3 rounded-full progress-bar" data-width="100%"></div></div>
              </div>
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">Adam Zampa</span><span class="text-cyan-400">118 wickets</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-cyan-400 h-3 rounded-full progress-bar" data-width="93%"></div></div>
              </div>
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">Andrew Tye</span><span class="text-cyan-400">112 wickets</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-cyan-400 h-3 rounded-full progress-bar" data-width="88%"></div></div>
              </div>
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">Kane Richardson</span><span class="text-cyan-400">105 wickets</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-cyan-400 h-3 rounded-full progress-bar" data-width="83%"></div></div>
              </div>
              <div>
                <div class="flex justify-between mb-1"><span class="font-semibold">Jhye Richardson</span><span class="text-cyan-400">98 wickets</span></div>
                <div class="bg-gray-800 rounded-full h-3"><div class="bg-cyan-400 h-3 rounded-full progress-bar" data-width="77%"></div></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Predictor -->
    <section id="predictor" class="py-16 bg-gradient-to-b from-gray-950 to-gray-900">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-10">
          <h2 class="text-3xl md:text-4xl font-bold"><span class="text-yellow-400">üéØ</span> Match Predictor</h2>
          <p class="text-gray-400 mt-2 max-w-2xl mx-auto">A lightweight, offline predictor (no live API). Uses historical + form-style weights.</p>
        </div>

        <div class="mb-8 bg-gray-900 rounded-2xl p-6 border border-white/10">
          <div class="flex items-center justify-between flex-wrap gap-3 mb-4">
            <h3 class="text-lg font-bold text-yellow-300"><i class="fas fa-ranking-star mr-2"></i>Power Rankings (offline)</h3>
            <button id="recalcRankings" class="text-sm px-3 py-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10">
              <i class="fas fa-rotate mr-2"></i>Recalculate
            </button>
          </div>
          <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-3" id="powerRankings"></div>
        </div>

        <div class="max-w-5xl mx-auto">
          <div class="bg-gray-900 rounded-3xl p-6 md:p-8 shadow-2xl border border-white/10">
            <!-- Match Selector -->
            <div class="mb-6 bg-gray-950/40 rounded-2xl p-4 border border-white/10">
               <label class="block text-sm font-semibold mb-2 text-gray-300"><i class="fas fa-calendar-check mr-2 text-purple-400"></i>Select Match from Schedule (Optional)</label>
               <select id="matchSelector" class="w-full bg-gray-800 text-white rounded-xl p-3 focus:ring-2 focus:ring-purple-400 outline-none text-sm">
                 <option value="">-- Custom Scenario (No Schedule Link) --</option>
               </select>
               <p class="text-xs text-gray-500 mt-2">Selecting a match will auto-fill teams. Predicting will update the Schedule section.</p>
            </div>
            <!-- Match Selector -->
            <div class="mb-6 bg-gray-950/40 rounded-2xl p-4 border border-white/10">
               <label class="block text-sm font-semibold mb-2 text-gray-300"><i class="fas fa-calendar-check mr-2 text-purple-400"></i>Select Match from Schedule (Optional)</label>
               <select id="matchSelector" class="w-full bg-gray-800 text-white rounded-xl p-3 focus:ring-2 focus:ring-purple-400 outline-none text-sm">
                 <option value="">-- Custom Scenario (No Schedule Link) --</option>
               </select>
               <p class="text-xs text-gray-500 mt-2">Selecting a match will auto-fill teams. Predicting will update the Schedule section.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-6 mb-6">
              <div class="bg-gray-950/40 rounded-2xl p-5 border border-white/10">
                <h3 class="text-base font-bold mb-3 text-cyan-300"><i class="fas fa-users mr-2"></i>Team 1</h3>
                <select id="team1" class="w-full bg-gray-800 text-white rounded-xl p-4 focus:ring-2 focus:ring-cyan-400 outline-none">
                  <option value="">Select Team 1</option>
                  <option value="strikers">Adelaide Strikers</option>
                  <option value="heat">Brisbane Heat</option>
                  <option value="hurricanes">Hobart Hurricanes</option>
                  <option value="renegades">Melbourne Renegades</option>
                  <option value="stars">Melbourne Stars</option>
                  <option value="scorchers">Perth Scorchers</option>
                  <option value="sixers">Sydney Sixers</option>
                  <option value="thunder">Sydney Thunder</option>
                </select>
                <div id="team1Stats" class="text-sm text-gray-400 space-y-1 mt-3"></div>
              </div>

              <div class="bg-gray-950/40 rounded-2xl p-5 border border-white/10">
                <h3 class="text-base font-bold mb-3 text-orange-300"><i class="fas fa-users mr-2"></i>Team 2</h3>
                <select id="team2" class="w-full bg-gray-800 text-white rounded-xl p-4 focus:ring-2 focus:ring-orange-400 outline-none">
                  <option value="">Select Team 2</option>
                  <option value="strikers">Adelaide Strikers</option>
                  <option value="heat">Brisbane Heat</option>
                  <option value="hurricanes">Hobart Hurricanes</option>
                  <option value="renegades">Melbourne Renegades</option>
                  <option value="stars">Melbourne Stars</option>
                  <option value="scorchers">Perth Scorchers</option>
                  <option value="sixers">Sydney Sixers</option>
                  <option value="thunder">Sydney Thunder</option>
                </select>
                <div id="team2Stats" class="text-sm text-gray-400 space-y-1 mt-3"></div>
              </div>
            </div>

            <div class="grid md:grid-cols-3 gap-4 mb-6">
              <div>
                <label class="block text-sm font-semibold mb-2 text-gray-300"><i class="fas fa-map-marker-alt mr-2 text-red-400"></i>Venue</label>
                <select id="venue" class="w-full bg-gray-800 text-white rounded-xl p-4 focus:ring-2 focus:ring-yellow-400 outline-none">
                  <option value="">Select Venue</option>
                  <option value="adelaide">Adelaide Oval (Adelaide, SA)</option>
                  <option value="gabba">Brisbane Cricket Ground - The Gabba (Brisbane, QLD)</option>
                  <option value="hobart">Bellerive Oval - Blundstone Arena (Hobart, TAS)</option>
                  <option value="marvel">Marvel Stadium - Docklands (Melbourne, VIC)</option>
                  <option value="mcg">Melbourne Cricket Ground - MCG (Melbourne, VIC)</option>
                  <option value="perth">Optus Stadium (Perth, WA)</option>
                  <option value="scg">Sydney Cricket Ground - SCG (Sydney, NSW)</option>
                  <option value="showground">Sydney Showground Stadium - ENGIE Stadium (Sydney, NSW)</option>
                </select>
              </div>

              <div>
                <label class="block text-sm font-semibold mb-2 text-gray-300"><i class="fas fa-coins mr-2 text-yellow-400"></i>Toss Winner</label>
                <select id="tossWinner" class="w-full bg-gray-800 text-white rounded-xl p-4 focus:ring-2 focus:ring-yellow-400 outline-none">
                  <option value="">Select Toss Winner</option>
                  <option value="team1">Team 1</option>
                  <option value="team2">Team 2</option>
                </select>
              </div>

              <div>
                <label class="block text-sm font-semibold mb-2 text-gray-300"><i class="fas fa-gavel mr-2 text-purple-400"></i>Toss Decision</label>
                <select id="tossDecision" class="w-full bg-gray-800 text-white rounded-xl p-4 focus:ring-2 focus:ring-yellow-400 outline-none">
                  <option value="">Select Decision</option>
                  <option value="bat">Bat First</option>
                  <option value="field">Field First (Chase)</option>
                </select>
              </div>
            </div>

            <button id="predictBtn" class="w-full bg-gradient-to-r from-yellow-400 to-orange-500 hover:from-yellow-500 hover:to-orange-600 text-black font-extrabold py-4 px-8 rounded-xl text-lg transition transform hover:scale-[1.01] shadow-lg">
              <i class="fas fa-magic mr-2"></i> PREDICT WINNER
            </button>
          </div>

          <div id="predictionResults" class="hidden mt-6">
            <div class="bg-gradient-to-r from-indigo-950 via-purple-950 to-indigo-950 rounded-3xl p-6 md:p-8 border border-purple-500/40 shadow-2xl">
              <h3 class="text-xl md:text-2xl font-bold text-center mb-5 text-yellow-300">
                <i class="fas fa-trophy mr-2"></i> Prediction Results
              </h3>

              <div id="winnerDisplay" class="text-center mb-6"></div>

              <div class="mb-6">
                <div class="flex justify-between mb-2 text-sm text-gray-200">
                  <span id="prob1Name" class="font-semibold"></span>
                  <span id="prob2Name" class="font-semibold"></span>
                </div>
                <div class="flex h-8 rounded-full overflow-hidden border border-white/10">
                  <div id="prob1Bar" class="bg-cyan-500 flex items-center justify-center font-bold transition-all duration-1000"></div>
                  <div id="prob2Bar" class="bg-orange-500 flex items-center justify-center font-bold transition-all duration-1000"></div>
                </div>
              </div>

              <div>
                <h4 class="font-bold mb-3 text-gray-100"><i class="fas fa-list-check mr-2 text-yellow-300"></i>Factor breakdown</h4>
                <div id="factorsBreakdown" class="space-y-2"></div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>

    <!-- Champions -->
    <section id="champions" class="py-16 bg-gray-950">
      <div class="max-w-7xl mx-auto px-4">
        <div class="text-center mb-10">
          <h2 class="text-3xl md:text-4xl font-bold"><span class="text-yellow-400">üèÜ</span> Season Champions (2011‚Äì2025)</h2>
          <p class="text-gray-400 mt-2">Winners and runner-ups for recent seasons.</p>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full max-w-4xl mx-auto bg-gray-900 rounded-2xl overflow-hidden border border-white/10">
            <thead class="bg-white/5">
              <tr>
                <th class="py-4 px-6 text-left">Season</th>
                <th class="py-4 px-6 text-left">Champion</th>
                <th class="py-4 px-6 text-left">Runner-up</th>
                <th class="py-4 px-6 text-center">Final Result</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-white/10" id="championsTable"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- === Schedule Section === -->
    <section id="schedule" class="py-16 bg-gradient-to-b from-gray-950 to-gray-900">
      <div class="max-w-6xl mx-auto px-4">
        <!-- Header -->
        <header class="bg-gradient-to-r from-purple-900 via-blue-900 to-purple-900 py-8 px-4 shadow-xl rounded-2xl mb-8">
          <div class="text-center">
            <div class="flex items-center justify-center gap-4 mb-4">
              <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center">
                <span class="text-3xl">üèè</span>
              </div>
              <h1 class="text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-yellow-400 via-orange-500 to-red-500 bg-clip-text text-transparent">
                BBL|15
              </h1>
            </div>
            <p class="text-xl text-gray-300">Big Bash League 2025-26 Complete Schedule</p>
            <p class="text-sm text-gray-400 mt-2">44 Matches ‚Ä¢ 8 Teams ‚Ä¢ Dec 14, 2025 - Jan 25, 2026</p>
          </div>
        </header>

        <!-- Filters -->
        <div class="bg-gray-900 rounded-xl p-4 shadow-lg mb-8 border border-white/10">
          <div class="flex flex-wrap gap-4 items-center justify-between">
            <div class="flex flex-wrap gap-4">
              <div>
                <label class="block text-sm text-gray-400 mb-1">Filter by Team</label>
                <select id="teamFilter" class="bg-gray-800 text-white px-4 py-2 rounded-lg border border-gray-600 focus:outline-none focus:border-purple-500">
                  <option value="all">All Teams</option>
                  <option value="Adelaide Strikers">Adelaide Strikers</option>
                  <option value="Brisbane Heat">Brisbane Heat</option>
                  <option value="Hobart Hurricanes">Hobart Hurricanes</option>
                  <option value="Melbourne Renegades">Melbourne Renegades</option>
                  <option value="Melbourne Stars">Melbourne Stars</option>
                  <option value="Perth Scorchers">Perth Scorchers</option>
                  <option value="Sydney Sixers">Sydney Sixers</option>
                  <option value="Sydney Thunder">Sydney Thunder</option>
                </select>
              </div>
              <div>
                <label class="block text-sm text-gray-400 mb-1">Match Type</label>
                <select id="typeFilter" class="bg-gray-800 text-white px-4 py-2 rounded-lg border border-gray-600 focus:outline-none focus:border-purple-500">
                  <option value="all">All Matches</option>
                  <option value="regular">Regular Season</option>
                  <option value="playoffs">Playoffs</option>
                </select>
              </div>
            </div>
            <div class="text-right">
              <p class="text-sm text-gray-400">Showing</p>
              <p id="matchCount" class="text-2xl font-bold text-purple-400">44 matches</p>
            </div>
          </div>
        </div>

        <!-- Standings Section -->
        <section class="mb-8">
          <div class="bg-gray-900 rounded-xl p-6 shadow-lg border border-white/10">
            <h2 class="text-2xl font-bold text-white flex items-center gap-3 mb-2">
              <span class="w-2 h-8 bg-gradient-to-b from-green-500 to-teal-500 rounded-full"></span>
              BBL|15 Standings
              <span class="text-green-500">üìä</span>
            </h2>
            <p class="text-sm text-gray-400 mb-6 ml-5">Auto-calculated from Post Match Winners ‚Ä¢ Win = 2 Points</p>
            <div class="overflow-x-auto">
              <table class="w-full text-left">
                <thead>
                  <tr class="border-b border-gray-700">
                    <th class="px-3 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider">#</th>
                    <th class="px-3 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider">Team</th>
                    <th class="px-3 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider text-center">GP</th>
                    <th class="px-3 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider text-center">W</th>
                    <th class="px-3 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider text-center">L</th>
                    <th class="px-3 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider text-center">T</th>
                    <th class="px-3 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider text-center">NR</th>
                    <th class="px-3 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider text-center">PTS</th>
                    <th class="px-3 py-3 text-xs font-semibold text-gray-400 uppercase tracking-wider text-center">NRR</th>
                  </tr>
                </thead>
                <tbody id="standingsBody"></tbody>
              </table>
            </div>
            <div class="mt-4 pt-4 border-t border-gray-700">
              <div class="flex flex-wrap gap-4 text-xs text-gray-500">
                <span><strong class="text-green-400">Top 4</strong> = Qualify for Playoffs</span>
                <span><strong class="text-purple-400">2 PTS</strong> = Per Win</span>
                <span>GP = Games Played</span>
                <span>W = Wins</span>
                <span>L = Losses</span>
                <span>T = Ties</span>
                <span>NR = No Result</span>
              </div>
              <p class="text-xs text-yellow-500 mt-2">üí° Select "Post Match Winner" for each match to update standings automatically!</p>
            </div>
          </div>
        </section>

        <!-- Match Schedule -->
        <div id="matchesContainer" class="grid gap-4"></div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="bg-black py-10 border-t border-white/5">
    <div class="max-w-7xl mx-auto px-4 text-center">
      <div class="text-4xl mb-3">üèè</div>
      <h3 class="text-xl font-bold">Big Bash League Dashboard</h3>
      <p class="text-gray-400 mt-2">Offline-friendly single page ‚Ä¢ Trends, stats, squads, predictor, schedule</p>
      <p class="text-gray-500 text-sm mt-3">Data note: This page is a curated demo snapshot (2011‚Äì2025).</p>
    </div>
  </footer>

  <script>
    // === Core Data ===
    const squads = {
      "Adelaide Strikers": {
        headCoach: "Tim Paine",
        contracted: [
          "Hassan Ali", "Cameron Boyce", "Jordan Buckingham", "Alex Carey",
          "Mackenzie Harvey", "Travis Head", "Thomas Kelly", "Chris Lynn",
          "Harry Nielsen", "Jamie Overton", "Lloyd Pope", "Alex Ross",
          "Jason Sangha", "Liam Scott", "Matt Short", "Tom Straker",
          "Henry Thornton", "Luke Wood"
        ],
        replacement: ["Jerrssis Wadia", "Harry Manenti"],
        marquee: []
      },
      "Brisbane Heat": {
        headCoach: "Johan Botha",
        contracted: [
          "Shaheen Shah Afridi", "Tom Alsop", "Xavier Bartlett", "Max Bryant",
          "Lachlan Hearne", "Spencer Johnson", "Usman Khawaja", "Matt Kuhnemann",
          "Marnus Labuschagne", "Nathan McSweeney", "Colin Munro", "Michael Neser",
          "Oli Patterson", "Jimmy Peirson", "Matthew Renshaw", "Callum Vidler",
          "Hugh Weibgen", "Jack Wildermuth"
        ],
        replacement: ["Paddy Dooley", "Liam Haskett", "Tom Balkin"],
        marquee: []
      },
      "Hobart Hurricanes": {
        headCoach: "Jeff Vaughan",
        contracted: [
          "Rehan Ahmed", "Marcus Bean", "Jackson Bird", "Iain Carlisle",
          "Nikhil Chaudhary", "Tim David", "Nathan Ellis", "Rishad Hossain",
          "Chris Jordan", "Ben McDermott", "Riley Meredith", "Mitch Owen",
          "Billy Stanlake", "Matthew Wade", "Tim Ward", "Jake Weatherald",
          "Beau Webster", "Mac Wright"
        ],
        replacement: ["Will Prestwidge"],
        marquee: []
      },
      "Melbourne Renegades": {
        headCoach: "Cameron White",
        contracted: [
          "Jason Behrendorff", "Josh Brown", "Harry Dixon", "Brendan Doggett",
          "Jake Fraser-McGurk", "Caleb Jewell", "Hassan Khan", "Nathan Lyon",
          "Fergus O'Neill", "Ollie Peake", "Muhammad Rizwan", "Tom Rogers",
          "Will Salzmann", "Gurinder Sandhu", "Tim Seifert", "Callum Stow",
          "Will Sutherland", "Adam Zampa"
        ],
        replacement: ["Sam Elliott", "Andrew Tye", "Matthew Spoors"],
        marquee: []
      },
      "Melbourne Stars": {
        headCoach: "Peter Moores",
        contracted: [
          "Austin Anlezark", "Scott Boland", "Hilton Cartwright", "Joe Clarke",
          "Tom Curran", "Sam Harper", "Liam Hatcher", "Campbell Kellaway",
          "Glenn Maxwell", "Hamish McKenzie", "Jon Merlo", "Haris Rauf",
          "Tom Rogers", "Peter Siddle", "Mark Steketee", "Marcus Stoinis",
          "Mitch Swepson", "Tom Whitney"
        ],
        replacement: ["Aryan Sharma"],
        marquee: []
      },
      "Perth Scorchers": {
        headCoach: "Adam Voges",
        contracted: [
          "Ashton Agar", "Finn Allen", "Mahkl Beardman", "Cooper Connolly",
          "Brody Couch", "Laurie Evans", "Sam Fanning", "Aaron Hardie",
          "Nick Hobson", "Josh Inglis", "Bryce Jackson", "Matthew Kelly",
          "Mitch Marsh", "Lance Morris", "Joel Paris", "David Payne",
          "Jhye Richardson", "Ashton Turner"
        ],
        replacement: ["Joel Curtis"],
        marquee: []
      },
      "Sydney Sixers": {
        headCoach: "Greg Shipperd",
        contracted: [
          "Sean Abbott", "Babar Azam", "Jafer Chohan", "Sam Curran",
          "Joel Davies", "Ben Dwarshuis", "Jack Edwards", "Moises Henriques",
          "Daniel Hughes", "Hayden Kerr", "Ben Manenti", "Todd Murphy",
          "Mitch Perry", "Josh Philippe", "Kane Richardson", "Lachlan Shaw",
          "Jordan Silk", "Steve Smith"
        ],
        replacement: ["Charlie Stobo", "Harjas Singh", "Riley Kingsell"],
        marquee: ["Mitchell Starc"]
      },
      "Sydney Thunder": {
        headCoach: "Trevor Bayliss",
        contracted: [
          "Tom Andrews", "Wes Agar", "Cameron Bancroft", "Sam Billings",
          "Ollie Davies", "Lockie Ferguson", "Matt Gilkes", "Chris Green",
          "Ryan Hadley", "Shadab Khan", "Sam Konstas", "Nic Maddinson",
          "Nathan McAndrew", "Blake Nikitaras", "Aidan O'Connor", "Daniel Sams",
          "Tanveer Sangha", "David Warner"
        ],
        replacement: ["Reece Topley", "Charlie Anderson"],
        marquee: ["Pat Cummins"]
      }
    };

    const teams = {
      "Adelaide Strikers": {
        home_venues: [
          { venue: "Adelaide Oval", city: "Adelaide", state: "SA" }
        ],
        primary_city: "Adelaide",
        color: "#0066cc",
        emoji: "‚ö°"
      },
      "Brisbane Heat": {
        home_venues: [
          { venue: "Brisbane Cricket Ground (The Gabba)", city: "Brisbane", state: "QLD" }
        ],
        primary_city: "Brisbane",
        color: "#00b3b3",
        emoji: "üî•"
      },
      "Hobart Hurricanes": {
        home_venues: [
          { venue: "Bellerive Oval (Blundstone Arena)", city: "Hobart", state: "TAS" }
        ],
        primary_city: "Hobart",
        color: "#663399",
        emoji: "üåÄ"
      },
      "Melbourne Stars": {
        home_venues: [
          { venue: "Melbourne Cricket Ground (MCG)", city: "Melbourne", state: "VIC" },
          { venue: "Marvel Stadium (Docklands)", city: "Melbourne", state: "VIC" }
        ],
        primary_city: "Melbourne",
        color: "#228b22",
        emoji: "‚≠ê"
      },
      "Melbourne Renegades": {
        home_venues: [
          { venue: "Marvel Stadium (Docklands)", city: "Melbourne", state: "VIC" },
          { venue: "Melbourne Cricket Ground (MCG)", city: "Melbourne", state: "VIC" }
        ],
        primary_city: "Melbourne",
        color: "#cc0000",
        emoji: "üé≠"
      },
      "Perth Scorchers": {
        home_venues: [
          { venue: "Optus Stadium", city: "Perth", state: "WA" }
        ],
        primary_city: "Perth",
        color: "#ff6600",
        emoji: "ü¶Ç"
      },
      "Sydney Sixers": {
        home_venues: [
          { venue: "Sydney Cricket Ground (SCG)", city: "Sydney", state: "NSW" }
        ],
        primary_city: "Sydney",
        color: "#ff1493",
        emoji: "6Ô∏è‚É£"
      },
      "Sydney Thunder": {
        home_venues: [
          { venue: "Sydney Showground Stadium (ENGIE Stadium)", city: "Sydney", state: "NSW" }
        ],
        primary_city: "Sydney",
        color: "#9acd32",
        emoji: "‚õàÔ∏è"
      }
    };

    const champions = [
      { season: "2024-25", champion: "Sydney Sixers", runnerUp: "Hobart Hurricanes", result: "Won by 12 runs" },
      { season: "2023-24", champion: "Perth Scorchers", runnerUp: "Brisbane Heat", result: "Won by 23 runs" },
      { season: "2022-23", champion: "Perth Scorchers", runnerUp: "Sydney Sixers", result: "Won by 79 runs" },
      { season: "2021-22", champion: "Perth Scorchers", runnerUp: "Sydney Sixers", result: "Won by 79 runs" },
      { season: "2020-21", champion: "Sydney Sixers", runnerUp: "Perth Scorchers", result: "Won by 27 runs" },
      { season: "2019-20", champion: "Sydney Sixers", runnerUp: "Melbourne Stars", result: "Won by 19 runs" },
      { season: "2018-19", champion: "Melbourne Renegades", runnerUp: "Melbourne Stars", result: "Won by 13 runs" },
      { season: "2017-18", champion: "Adelaide Strikers", runnerUp: "Hobart Hurricanes", result: "Won by 25 runs" },
      { season: "2016-17", champion: "Perth Scorchers", runnerUp: "Sydney Sixers", result: "Won by 3 wickets" },
      { season: "2015-16", champion: "Sydney Thunder", runnerUp: "Melbourne Stars", result: "Won by 3 wickets" },
      { season: "2014-15", champion: "Perth Scorchers", runnerUp: "Sydney Sixers", result: "Won by 4 wickets" },
      { season: "2013-14", champion: "Perth Scorchers", runnerUp: "Hobart Hurricanes", result: "Won by 39 runs" },
      { season: "2012-13", champion: "Brisbane Heat", runnerUp: "Perth Scorchers", result: "Won by 34 runs" },
      { season: "2011-12", champion: "Sydney Sixers", runnerUp: "Perth Scorchers", result: "Won by 7 wickets" }
    ];

    const teamStats = {
      strikers: { name: 'Adelaide Strikers', color: '#0066cc', wins: 68, losses: 63, titles: 1, winRate: 51.9, homeWinRate: 62, avgScore: 158, chaseWinRate: 55, defendWinRate: 49, finalsWinRate: 52, recentForm: 45, deathBowlingEcon: 8.1, keyPlayers: ['Travis Head', 'Chris Lynn', 'Hasan Ali'], currentSeasonWins: 0, currentSeasonLosses: 1 },
      heat: { name: 'Brisbane Heat', color: '#00b3b3', wins: 58, losses: 74, titles: 1, winRate: 43.9, homeWinRate: 55, avgScore: 154, chaseWinRate: 50, defendWinRate: 40, finalsWinRate: 38, recentForm: 35, deathBowlingEcon: 8.9, keyPlayers: ['Usman Khawaja', 'Shaheen Afridi', 'Marnus Labuschagne'], currentSeasonWins: 0, currentSeasonLosses: 2 },
      hurricanes: { name: 'Hobart Hurricanes', color: '#663399', wins: 71, losses: 61, titles: 0, winRate: 53.8, homeWinRate: 64, avgScore: 156, chaseWinRate: 56, defendWinRate: 51, finalsWinRate: 48, recentForm: 58, deathBowlingEcon: 8.3, keyPlayers: ['Tim David', 'Matthew Wade', 'Riley Meredith'], currentSeasonWins: 1, currentSeasonLosses: 1 },
      renegades: { name: 'Melbourne Renegades', color: '#cc0000', wins: 63, losses: 68, titles: 1, winRate: 48.1, homeWinRate: 56, avgScore: 155, chaseWinRate: 52, defendWinRate: 44, finalsWinRate: 55, recentForm: 65, deathBowlingEcon: 8.5, keyPlayers: ['Jake Fraser-McGurk', 'Adam Zampa', 'Mohammad Rizwan'], currentSeasonWins: 1, currentSeasonLosses: 0 },
      stars: { name: 'Melbourne Stars', color: '#228b22', wins: 73, losses: 58, titles: 0, winRate: 55.7, homeWinRate: 66, avgScore: 162, chaseWinRate: 60, defendWinRate: 52, finalsWinRate: 30, recentForm: 68, deathBowlingEcon: 8.0, keyPlayers: ['Glenn Maxwell', 'Marcus Stoinis', 'Haris Rauf'], currentSeasonWins: 1, currentSeasonLosses: 0 },
      scorchers: { name: 'Perth Scorchers', color: '#ff6600', wins: 90, losses: 42, titles: 5, winRate: 68.2, homeWinRate: 78, avgScore: 165, chaseWinRate: 70, defendWinRate: 65, finalsWinRate: 78, recentForm: 85, deathBowlingEcon: 7.4, keyPlayers: ['Mitchell Marsh', 'Jhye Richardson', 'Ashton Turner'], currentSeasonWins: 2, currentSeasonLosses: 0 },
      sixers: { name: 'Sydney Sixers', color: '#ff1493', wins: 83, losses: 49, titles: 4, winRate: 62.9, homeWinRate: 72, avgScore: 163, chaseWinRate: 65, defendWinRate: 60, finalsWinRate: 70, recentForm: 62, deathBowlingEcon: 7.6, keyPlayers: ['Steve Smith', 'Babar Azam', 'Mitchell Starc'], currentSeasonWins: 1, currentSeasonLosses: 1 },
      thunder: { name: 'Sydney Thunder', color: '#9acd32', wins: 55, losses: 76, titles: 1, winRate: 42.0, homeWinRate: 52, avgScore: 152, chaseWinRate: 48, defendWinRate: 38, finalsWinRate: 50, recentForm: 38, deathBowlingEcon: 9.1, keyPlayers: ['David Warner', 'Lockie Ferguson', 'Shadab Khan'], currentSeasonWins: 0, currentSeasonLosses: 1 }
    };

    const h2hRecords = {
      'strikers_heat': { wins1: 12, wins2: 10 }, 'strikers_hurricanes': { wins1: 11, wins2: 11 },
      'strikers_renegades': { wins1: 10, wins2: 12 }, 'strikers_stars': { wins1: 11, wins2: 12 },
      'strikers_scorchers': { wins1: 8, wins2: 14 }, 'strikers_sixers': { wins1: 9, wins2: 14 },
      'strikers_thunder': { wins1: 13, wins2: 8 }, 'heat_hurricanes': { wins1: 10, wins2: 12 },
      'heat_renegades': { wins1: 11, wins2: 11 }, 'heat_stars': { wins1: 9, wins2: 13 },
      'heat_scorchers': { wins1: 6, wins2: 18 }, 'heat_sixers': { wins1: 7, wins2: 15 },
      'heat_thunder': { wins1: 12, wins2: 10 }, 'hurricanes_renegades': { wins1: 11, wins2: 11 },
      'hurricanes_stars': { wins1: 9, wins2: 14 }, 'hurricanes_scorchers': { wins1: 7, wins2: 15 },
      'hurricanes_sixers': { wins1: 10, wins2: 12 }, 'hurricanes_thunder': { wins1: 15, wins2: 8 },
      'renegades_stars': { wins1: 11, wins2: 11 }, 'renegades_scorchers': { wins1: 7, wins2: 15 },
      'renegades_sixers': { wins1: 9, wins2: 13 }, 'renegades_thunder': { wins1: 13, wins2: 9 },
      'stars_scorchers': { wins1: 10, wins2: 13 }, 'stars_sixers': { wins1: 11, wins2: 11 },
      'stars_thunder': { wins1: 14, wins2: 8 }, 'scorchers_sixers': { wins1: 12, wins2: 10 },
      'scorchers_thunder': { wins1: 16, wins2: 6 }, 'sixers_thunder': { wins1: 14, wins2: 8 }
    };

    const venueData = {
      adelaide: {
        name: 'Adelaide Oval (Adelaide, SA)',
        shortName: 'Adelaide Oval',
        homeTeam: 'strikers',
        avgScore: 158
      },
      gabba: {
        name: 'Brisbane Cricket Ground - The Gabba (Brisbane, QLD)',
        shortName: 'The Gabba',
        homeTeam: 'heat',
        avgScore: 162
      },
      hobart: {
        name: 'Bellerive Oval - Blundstone Arena (Hobart, TAS)',
        shortName: 'Blundstone Arena',
        homeTeam: 'hurricanes',
        avgScore: 155
      },
      marvel: {
        name: 'Marvel Stadium - Docklands (Melbourne, VIC)',
        shortName: 'Marvel Stadium',
        homeTeam: 'renegades',
        avgScore: 160
      },
      mcg: {
        name: 'Melbourne Cricket Ground - MCG (Melbourne, VIC)',
        shortName: 'MCG',
        homeTeam: 'stars',
        avgScore: 165
      },
      perth: {
        name: 'Optus Stadium (Perth, WA)',
        shortName: 'Optus Stadium',
        homeTeam: 'scorchers',
        avgScore: 170
      },
      scg: {
        name: 'Sydney Cricket Ground - SCG (Sydney, NSW)',
        shortName: 'SCG',
        homeTeam: 'sixers',
        avgScore: 160
      },
      showground: {
        name: 'Sydney Showground Stadium - ENGIE Stadium (Sydney, NSW)',
        shortName: 'ENGIE Stadium',
        homeTeam: 'thunder',
        avgScore: 152
      }
    };

    // === Schedule Data ===
    const allTeamsSchedule = [
      "Perth Scorchers",
      "Sydney Sixers",
      "Melbourne Renegades",
      "Brisbane Heat",
      "Hobart Hurricanes",
      "Sydney Thunder",
      "Adelaide Strikers",
      "Melbourne Stars"
    ];

    const teamCodeToName = {
      "STA": "Melbourne Stars",
      "HUR": "Hobart Hurricanes",
      "SIX": "Sydney Sixers",
      "SCO": "Perth Scorchers",
      "THU": "Sydney Thunder",
      "STR": "Adelaide Strikers",
      "HEA": "Brisbane Heat",
      "REN": "Melbourne Renegades"
    };

    const matches = [
      // Regular Season Matches
      {match: 1, date: "2025-12-14", team1: "Perth Scorchers", team2: "Sydney Sixers"},
      {match: 2, date: "2025-12-15", team1: "Melbourne Renegades", team2: "Brisbane Heat"},
      {match: 3, date: "2025-12-16", team1: "Hobart Hurricanes", team2: "Sydney Thunder"},
      {match: 4, date: "2025-12-17", team1: "Sydney Sixers", team2: "Adelaide Strikers"},
      {match: 5, date: "2025-12-18", team1: "Melbourne Stars", team2: "Hobart Hurricanes"},
      {match: 6, date: "2025-12-19", team1: "Brisbane Heat", team2: "Perth Scorchers"},
      {match: 7, date: "2025-12-20", team1: "Sydney Sixers", team2: "Sydney Thunder"},
      {match: 8, date: "2025-12-21", team1: "Melbourne Renegades", team2: "Hobart Hurricanes"},
      {match: 9, date: "2025-12-22", team1: "Sydney Thunder", team2: "Brisbane Heat"},
      {match: 10, date: "2025-12-23", team1: "Adelaide Strikers", team2: "Melbourne Stars"},
      {match: 11, date: "2025-12-26", team1: "Sydney Sixers", team2: "Melbourne Stars"},
      {match: 12, date: "2025-12-26", team1: "Perth Scorchers", team2: "Hobart Hurricanes"},
      {match: 13, date: "2025-12-27", team1: "Brisbane Heat", team2: "Adelaide Strikers"},
      {match: 14, date: "2025-12-28", team1: "Melbourne Stars", team2: "Sydney Thunder"},
      {match: 15, date: "2025-12-29", team1: "Hobart Hurricanes", team2: "Melbourne Renegades"},
      {match: 16, date: "2025-12-30", team1: "Sydney Thunder", team2: "Perth Scorchers"},
      {match: 17, date: "2025-12-31", team1: "Adelaide Strikers", team2: "Brisbane Heat"},
      {match: 18, date: "2026-01-01", team1: "Melbourne Renegades", team2: "Sydney Sixers"},
      {match: 19, date: "2026-01-01", team1: "Hobart Hurricanes", team2: "Perth Scorchers"},
      {match: 20, date: "2026-01-02", team1: "Brisbane Heat", team2: "Melbourne Stars"},
      {match: 21, date: "2026-01-03", team1: "Sydney Thunder", team2: "Hobart Hurricanes"},
      {match: 22, date: "2026-01-04", team1: "Melbourne Stars", team2: "Melbourne Renegades"},
      {match: 23, date: "2026-01-04", team1: "Perth Scorchers", team2: "Adelaide Strikers"},
      {match: 24, date: "2026-01-05", team1: "Sydney Sixers", team2: "Brisbane Heat"},
      {match: 25, date: "2026-01-06", team1: "Adelaide Strikers", team2: "Sydney Thunder"},
      {match: 26, date: "2026-01-07", team1: "Perth Scorchers", team2: "Melbourne Renegades"},
      {match: 27, date: "2026-01-08", team1: "Melbourne Stars", team2: "Sydney Sixers"},
      {match: 28, date: "2026-01-09", team1: "Hobart Hurricanes", team2: "Adelaide Strikers"},
      {match: 29, date: "2026-01-10", team1: "Brisbane Heat", team2: "Sydney Thunder"},
      {match: 30, date: "2026-01-10", team1: "Melbourne Renegades", team2: "Melbourne Stars"},
      {match: 31, date: "2026-01-11", team1: "Sydney Sixers", team2: "Hobart Hurricanes"},
      {match: 32, date: "2026-01-11", team1: "Adelaide Strikers", team2: "Perth Scorchers"},
      {match: 33, date: "2026-01-12", team1: "Sydney Thunder", team2: "Melbourne Renegades"},
      {match: 34, date: "2026-01-13", team1: "Melbourne Stars", team2: "Adelaide Strikers"},
      {match: 35, date: "2026-01-14", team1: "Hobart Hurricanes", team2: "Brisbane Heat"},
      {match: 36, date: "2026-01-15", team1: "Melbourne Renegades", team2: "Perth Scorchers"},
      {match: 37, date: "2026-01-16", team1: "Sydney Sixers", team2: "Sydney Thunder"},
      {match: 38, date: "2026-01-17", team1: "Adelaide Strikers", team2: "Melbourne Renegades"},
      {match: 39, date: "2026-01-17", team1: "Perth Scorchers", team2: "Melbourne Stars"},
      {match: 40, date: "2026-01-18", team1: "Brisbane Heat", team2: "Sydney Sixers"},
      // Playoffs
      {match: "Qualifier", date: "2026-01-20", team1: "1st Place", team2: "2nd Place", isPlayoff: true},
      {match: "Knockout", date: "2026-01-21", team1: "3rd Place", team2: "4th Place", isPlayoff: true},
      {match: "Challenger", date: "2026-01-23", team1: "Knockout Winner", team2: "Qualifier Loser", isPlayoff: true},
      {match: "Final", date: "2026-01-25", team1: "Qualifier Winner", team2: "Challenger Winner", isPlayoff: true}
    ];

    const teamColorsSchedule = {
      "Perth Scorchers": "team-scorchers",
      "Sydney Sixers": "team-sixers",
      "Melbourne Renegades": "team-renegades",
      "Brisbane Heat": "team-heat",
      "Hobart Hurricanes": "team-hurricanes",
      "Sydney Thunder": "team-thunder",
      "Adelaide Strikers": "team-strikers",
      "Melbourne Stars": "team-stars"
    };

    const teamLogosSchedule = {
      "Perth Scorchers": "üî•",
      "Sydney Sixers": "6Ô∏è‚É£",
      "Melbourne Renegades": "üé≠",
      "Brisbane Heat": "üå°Ô∏è",
      "Hobart Hurricanes": "üåÄ",
      "Sydney Thunder": "‚ö°",
      "Adelaide Strikers": "‚ö°",
      "Melbourne Stars": "‚≠ê"
    };

    const nameToKey = {
      "Adelaide Strikers": "strikers",
      "Brisbane Heat": "heat",
      "Hobart Hurricanes": "hurricanes",
      "Melbourne Renegades": "renegades",
      "Melbourne Stars": "stars",
      "Perth Scorchers": "scorchers",
      "Sydney Sixers": "sixers",
      "Sydney Thunder": "thunder"
    };

    function initMatchSelector() {
      const selector = document.getElementById('matchSelector');
      if (!selector) return;

      while (selector.options.length > 1) {
        selector.remove(1);
      }

      matches.forEach(m => {
        if (nameToKey[m.team1] && nameToKey[m.team2]) {
           const option = document.createElement('option');
           const matchId = typeof m.match === 'number' ? `match_${m.match}` : `match_${m.match}`;
           option.value = matchId;
           const label = typeof m.match === 'number' ? `Match ${m.match}: ${m.team1} vs ${m.team2}` : `${m.match}: ${m.team1} vs ${m.team2}`;
           option.text = label;
           selector.appendChild(option);
        }
      });

      selector.addEventListener('change', (e) => {
        const matchId = e.target.value;
        if (!matchId) return;

        const match = matches.find(m => {
             const mId = typeof m.match === 'number' ? `match_${m.match}` : `match_${m.match}`;
             return mId === matchId;
        });

        if (match) {
           const t1Key = nameToKey[match.team1];
           const t2Key = nameToKey[match.team2];
           const team1Select = document.getElementById('team1');
           const team2Select = document.getElementById('team2');

           if (team1Select && t1Key) {
             team1Select.value = t1Key;
             updateTeamDisplay('team1', 'team1Stats');
           }
           if (team2Select && t2Key) {
             team2Select.value = t2Key;
             updateTeamDisplay('team2', 'team2Stats');
           }

           // Auto-select venue based on Home Team (Team 1)
           const venueSelect = document.getElementById('venue');
           if (venueSelect && t1Key) {
             let homeVenueKey = '';
             for (const [vKey, vData] of Object.entries(venueData)) {
               if (vData.homeTeam === t1Key) {
                 homeVenueKey = vKey;
                 break;
               }
             }
             if (homeVenueKey) venueSelect.value = homeVenueKey;
             else venueSelect.value = "";
           }

           document.getElementById('predictionResults').classList.add('hidden');
        }
      });
    }

    // === Dashboard helpers ===
    function renderSquads() {
      const container = document.getElementById('squadsContainer');
      if (!container) return;
      container.innerHTML = '';

      Object.entries(squads).forEach(([teamName, data]) => {
        const meta = teams[teamName] || {};
        const card = document.createElement('div');
        card.className = 'bg-gray-900 rounded-2xl p-5 border border-white/10 flex flex-col gap-4 card-hover';

        const homeVenues = (meta.home_venues || []).map(v => v.venue).join(', ');

        card.innerHTML = `
          <div class="flex items-start justify-between gap-2">
            <div>
              <div class="flex items-center gap-2 mb-1">
                <span class="text-xl">${meta.emoji || 'üèè'}</span>
                <h3 class="font-bold text-base">${teamName}</h3>
              </div>
              <p class="text-xs text-gray-400">Head coach: <span class="text-gray-200 font-semibold">${data.headCoach}</span></p>
              ${homeVenues ? `<p class="text-[11px] text-gray-500 mt-1">Home: ${homeVenues}</p>` : ''}
            </div>
          </div>
          <div class="flex flex-wrap gap-2 text-[11px]">
            <span class="px-2 py-1 rounded-full bg-blue-500/10 text-blue-300 border border-blue-500/40">${data.contracted.length} contracted</span>
            <span class="px-2 py-1 rounded-full bg-amber-500/10 text-amber-300 border border-amber-500/40">${data.replacement.length} replacement</span>
            <span class="px-2 py-1 rounded-full bg-pink-500/10 text-pink-300 border border-pink-500/40">${data.marquee.length} marquee</span>
          </div>
          <div class="space-y-2 text-[11px]">
            <div>
              <p class="uppercase tracking-wide text-gray-400 mb-1">Key contracted</p>
              <div class="flex flex-wrap gap-1">
                ${data.contracted.slice(0, 6).map(p => `<span class="px-2 py-0.5 rounded-full bg-gray-800 text-gray-200">${p}</span>`).join('')}
                ${data.contracted.length > 6 ? `<span class="px-2 py-0.5 rounded-full bg-gray-800 text-gray-400">+${data.contracted.length - 6} more</span>` : ''}
              </div>
            </div>
            ${data.marquee.length ? `
              <div>
                <p class="uppercase tracking-wide text-pink-300 mb-1">Marquee</p>
                <div class="flex flex-wrap gap-1">
                  ${data.marquee.map(p => `<span class="px-2 py-0.5 rounded-full bg-pink-600/20 text-pink-200 border border-pink-500/50">${p}</span>`).join('')}
                </div>
              </div>` : ''}
          </div>
        `;

        container.appendChild(card);
      });
    }

    function renderChampions() {
      const tbody = document.getElementById('championsTable');
      if (!tbody) return;
      tbody.innerHTML = '';

      champions.forEach((row, idx) => {
        const tr = document.createElement('tr');
        tr.className = idx % 2 === 0 ? 'bg-gray-900/80' : 'bg-gray-900/40';
        tr.innerHTML = `
          <td class="py-3 px-6 text-sm font-semibold text-gray-200">${row.season}</td>
          <td class="py-3 px-6 text-sm">
            <span class="font-semibold text-emerald-300">${row.champion}</span>
          </td>
          <td class="py-3 px-6 text-sm text-gray-300">${row.runnerUp}</td>
          <td class="py-3 px-6 text-sm text-center text-gray-200">${row.result}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    let chartsInited = { stats: false, trends: false };

    function initStatsCharts() {
      if (chartsInited.stats) return;
      chartsInited.stats = true;

      const matchesCtx = document.getElementById('matchesChart');
      const titlesCtx = document.getElementById('titlesChart');
      if (!matchesCtx || !titlesCtx) return;

      const seasons = ['2011-12','2012-13','2013-14','2014-15','2015-16','2016-17','2017-18','2018-19','2019-20','2020-21','2021-22','2022-23','2023-24','2024-25'];
      const matchesPerSeason = [31,35,35,35,35,35,35,59,61,61,61,61,44,44];

      new Chart(matchesCtx.getContext('2d'), {
        type: 'bar',
        data: {
          labels: seasons,
          datasets: [{
            label: 'Matches',
            data: matchesPerSeason,
            backgroundColor: 'rgba(250, 204, 21, 0.7)',
            borderRadius: 6,
          }]
        },
        options: {
          plugins: {
            legend: { display: false },
            tooltip: { callbacks: { label: ctx => `${ctx.parsed.y} matches` } }
          },
          scales: {
            x: { ticks: { color: '#9CA3AF', maxRotation: 60, minRotation: 40 }, grid: { display: false } },
            y: { ticks: { color: '#9CA3AF' }, grid: { color: 'rgba(55,65,81,0.6)' }, beginAtZero: true }
          }
        }
      });

      // Titles chart
      const titlesMap = {};
      champions.forEach(c => {
        titlesMap[c.champion] = (titlesMap[c.champion] || 0) + 1;
      });
      const orderedTeams = ['Perth Scorchers','Sydney Sixers','Brisbane Heat','Melbourne Renegades','Adelaide Strikers','Sydney Thunder','Hobart Hurricanes','Melbourne Stars'];
      const titleCounts = orderedTeams.map(t => titlesMap[t] || 0);

      new Chart(titlesCtx.getContext('2d'), {
        type: 'bar',
        data: {
          labels: orderedTeams,
          datasets: [{
            label: 'Titles',
            data: titleCounts,
            backgroundColor: [
              '#fb923c','#f472b6','#22c55e','#ef4444','#3b82f6','#a3e635','#8b5cf6','#64748b'
            ],
            borderRadius: 6,
          }]
        },
        options: {
          plugins: {
            legend: { display: false },
            tooltip: { callbacks: { label: ctx => `${ctx.parsed.y} title${ctx.parsed.y === 1 ? '' : 's'}` } }
          },
          scales: {
            x: { ticks: { color: '#9CA3AF', maxRotation: 40, minRotation: 40 }, grid: { display: false } },
            y: { ticks: { color: '#9CA3AF', stepSize: 1 }, grid: { color: 'rgba(55,65,81,0.6)' }, beginAtZero: true, suggestedMax: 5 }
          }
        }
      });
    }

    function initTrendCharts() {
      if (chartsInited.trends) return;
      chartsInited.trends = true;

      const scoringCtx = document.getElementById('scoringTrendsChart');
      const winRateCtx = document.getElementById('winRateChart');
      if (!scoringCtx || !winRateCtx) return;

      const overLabels = ['Powerplay (1‚Äì6)', 'Middle (7‚Äì15)', 'Death (16‚Äì20)'];
      new Chart(scoringCtx.getContext('2d'), {
        type: 'line',
        data: {
          labels: overLabels,
          datasets: [
            {
              label: '1st innings run rate',
              data: [7.8, 7.4, 9.1],
              borderColor: '#fbbf24',
              backgroundColor: 'rgba(251,191,36,0.2)',
              tension: 0.35,
              fill: true,
            },
            {
              label: '2nd innings run rate',
              data: [7.5, 7.7, 9.4],
              borderColor: '#22d3ee',
              backgroundColor: 'rgba(34,211,238,0.15)',
              tension: 0.35,
              fill: true,
            }
          ]
        },
        options: {
          plugins: {
            legend: { labels: { color: '#E5E7EB' } },
            tooltip: {
              callbacks: {
                label: ctx => `${ctx.dataset.label}: ${ctx.parsed.y.toFixed(1)} rpo`
              }
            }
          },
          scales: {
            x: { ticks: { color: '#9CA3AF' }, grid: { display: false } },
            y: { ticks: { color: '#9CA3AF' }, grid: { color: 'rgba(55,65,81,0.6)' }, beginAtZero: true }
          }
        }
      });

      const scenarioLabels = ['Bat first', 'Chase', 'Home team', 'Away team', 'Toss winner', 'Toss loser'];
      const winRates = [46, 54, 62, 38, 51, 49];

      new Chart(winRateCtx.getContext('2d'), {
        type: 'bar',
        data: {
          labels: scenarioLabels,
          datasets: [{
            label: 'Win %',
            data: winRates,
            backgroundColor: winRates.map(v => v >= 50 ? 'rgba(34,197,94,0.8)' : 'rgba(248,113,113,0.8)'),
            borderRadius: 6
          }]
        },
        options: {
          plugins: {
            legend: { display: false },
            tooltip: { callbacks: { label: ctx => `${ctx.parsed.y}% win rate` } }
          },
          scales: {
            x: { ticks: { color: '#9CA3AF', maxRotation: 40, minRotation: 40 }, grid: { display: false } },
            y: { ticks: { color: '#9CA3AF', callback: v => v + '%' }, grid: { color: 'rgba(55,65,81,0.6)' }, beginAtZero: true, suggestedMax: 70 }
          }
        }
      });
    }

    function animateCounters() {
      const counters = document.querySelectorAll('.stat-counter');
      counters.forEach(counter => {
        const target = parseInt(counter.getAttribute('data-target') || '0', 10);
        let current = 0;
        const duration = 1200;
        const start = performance.now();

        function update(now) {
          const progress = Math.min(1, (now - start) / duration);
          const eased = 1 - Math.pow(1 - progress, 3);
          current = Math.floor(target * eased);
          counter.textContent = current.toLocaleString('en-AU');
          if (progress < 1) requestAnimationFrame(update);
          else counter.textContent = target.toLocaleString('en-AU');
        }
        requestAnimationFrame(update);
      });
    }

    function fillProgressBars() {
      document.querySelectorAll('.progress-bar').forEach(bar => {
        const width = bar.getAttribute('data-width') || '0%';
        bar.style.width = width;
      });
    }

    function updateTeamDisplay(selectId, displayId) {
      const select = document.getElementById(selectId);
      const display = document.getElementById(displayId);
      if (!select || !display) return;

      const key = select.value;
      if (!key) {
        display.innerHTML = '<p class="text-xs text-gray-500">Select a team to see summary stats.</p>';
        return;
      }

      const stats = teamStats[key];
      if (!stats) {
        display.innerHTML = '<p class="text-xs text-red-400">No data available.</p>';
        return;
      }

      // Find matching squad meta by name to show venues
      let homeVenues = [];
      Object.entries(teams).forEach(([teamName, meta]) => {
        if (teamName === stats.name) {
          homeVenues = (meta.home_venues || []).map(v => v.venue);
        }
      });

      const formDiff = stats.recentForm - 50;
      const formLabel = formDiff > 0 ? `Hot form (+${formDiff.toFixed(1)} vs league 50)` : `Below-par form (${formDiff.toFixed(1)} vs league 50)`;

      display.innerHTML = `
        <p class="text-sm font-semibold text-gray-100 mb-1">${stats.name}</p>
        ${homeVenues.length ? `<p class="text-[11px] text-gray-400 mb-1">Primary home: ${homeVenues.join(', ')}</p>` : ''}
        <p class="text-xs text-gray-300"><span class="font-semibold">All-time W%:</span> ${stats.winRate.toFixed(1)}% ‚Ä¢ Titles: ${stats.titles}</p>
        <p class="text-xs text-gray-300"><span class="font-semibold">Bat / Chase W%:</span> ${stats.defendWinRate}% / ${stats.chaseWinRate}%</p>
        <p class="text-xs text-gray-300"><span class="font-semibold">Current season:</span> ${stats.currentSeasonWins}-${stats.currentSeasonLosses} (W-L)</p>
        <p class="text-xs text-gray-300"><span class="font-semibold">Avg score:</span> ${stats.avgScore} ‚Ä¢ Death econ: ${stats.deathBowlingEcon}</p>
        <p class="text-xs text-gray-400 mt-1">${formLabel}</p>
        <p class="text-xs text-gray-400 mt-1"><span class="font-semibold">Key players:</span> ${stats.keyPlayers.join(', ')}</p>
      `;
    }

    function getH2H(team1Key, team2Key) {
      if (!team1Key || !team2Key || team1Key === team2Key) return null;
      const key1 = `${team1Key}_${team2Key}`;
      const key2 = `${team2Key}_${team1Key}`;
      if (h2hRecords[key1]) {
        const r = h2hRecords[key1];
        return { team1Wins: r.wins1, team2Wins: r.wins2 };
      }
      if (h2hRecords[key2]) {
        const r = h2hRecords[key2];
        return { team1Wins: r.wins2, team2Wins: r.wins1 };
      }
      return null;
    }

    function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

    function recalcPowerRankings() {
      const container = document.getElementById('powerRankings');
      if (!container) return;
      container.innerHTML = '';

      const rankings = Object.entries(teamStats).map(([key, s]) => {
        // Composite score using win rate, form, home strength, titles, current season & bowling
        const base = s.winRate * 0.4 + s.recentForm * 0.25 + s.homeWinRate * 0.1;
        const silverware = s.titles * 4 + s.finalsWinRate * 0.05;
        const seasonImpact = s.currentSeasonWins * 3 - s.currentSeasonLosses * 1.5;
        const bowlingControl = (10 - Math.min(10, s.deathBowlingEcon)) * 1.5;
        const score = base + silverware + seasonImpact + bowlingControl;
        return { key, score, stats: s };
      });

      const scores = rankings.map(r => r.score);
      const maxScore = Math.max(...scores);
      const minScore = Math.min(...scores);

      rankings.sort((a, b) => b.score - a.score);

      rankings.forEach((entry, idx) => {
        const s = entry.stats;
        const normalised = maxScore === minScore ? 100 : ((entry.score - minScore) / (maxScore - minScore)) * 100;
        const power = Math.round(normalised);

        const card = document.createElement('div');
        card.className = 'bg-gray-900 rounded-2xl p-3 border border-white/10 flex flex-col gap-1';
        card.innerHTML = `
          <div class="flex items-center justify-between mb-1">
            <span class="text-[11px] font-semibold text-gray-400">#${idx + 1}</span>
            <span class="text-[10px] px-2 py-0.5 rounded-full" style="background-color:${s.color}22;color:${s.color}">Power ${power}%</span>
          </div>
          <p class="text-xs font-bold text-gray-100">${s.name}</p>
          <p class="text-[10px] text-gray-400">All-time W% ${s.winRate.toFixed(1)} ‚Ä¢ Titles ${s.titles}</p>
          <div class="w-full bg-gray-800 rounded-full h-1.5 mt-1 overflow-hidden">
            <div class="h-1.5 rounded-full" style="width:${power}%;background:linear-gradient(90deg,${s.color},#fde68a)"></div>
          </div>
        `;
        container.appendChild(card);
      });
    }

    function predictMatch() {
      const team1Key = document.getElementById('team1').value;
      const team2Key = document.getElementById('team2').value;
      const venueKey = document.getElementById('venue').value;
      const tossWinner = document.getElementById('tossWinner').value;
      const tossDecision = document.getElementById('tossDecision').value;

      if (!team1Key || !team2Key || !venueKey || !tossWinner || !tossDecision) {
        alert('Please select both teams, venue, toss winner and decision.');
        return;
      }
      if (team1Key === team2Key) {
        alert('Please choose two different teams.');
        return;
      }

      const t1 = teamStats[team1Key];
      const t2 = teamStats[team2Key];
      const venue = venueData[venueKey];

      if (!t1 || !t2 || !venue) return;

      // Base rating from all-time win rate
      let r1 = t1.winRate;
      let r2 = t2.winRate;

      // Recent form (centered around 50)
      r1 += (t1.recentForm - 50) * 0.4;
      r2 += (t2.recentForm - 50) * 0.4;

      // Titles and finals experience
      r1 += t1.titles * 1.5 + t1.finalsWinRate * 0.05;
      r2 += t2.titles * 1.5 + t2.finalsWinRate * 0.05;

      // Bowling control at the death
      r1 += (10 - Math.min(10, t1.deathBowlingEcon)) * 0.9;
      r2 += (10 - Math.min(10, t2.deathBowlingEcon)) * 0.9;

      // Venue: home advantage & scoring profile
      let venueNote = 'Neutral venue';
      if (venue.homeTeam === team1Key) {
        r1 += 4;
        venueNote = `${t1.name} home advantage`;
      } else if (venue.homeTeam === team2Key) {
        r2 += 4;
        venueNote = `${t2.name} home advantage`;
      }
      if (venue.avgScore >= 165) {
        // Higher scoring favours stronger batting units
        r1 += (t1.avgScore - 155) * 0.08;
        r2 += (t2.avgScore - 155) * 0.08;
      } else if (venue.avgScore <= 155) {
        // Lower scoring rewards better bowling
        r1 += (10 - Math.min(10, t1.deathBowlingEcon)) * 0.3;
        r2 += (10 - Math.min(10, t2.deathBowlingEcon)) * 0.3;
      }

      // Head-to-head tilt
      const h2h = getH2H(team1Key, team2Key);
      let h2hNote = 'Limited H2H data';
      if (h2h) {
        const total = h2h.team1Wins + h2h.team2Wins;
        if (total > 0) {
          const winRate1 = h2h.team1Wins / total;
          const advantage = (winRate1 - 0.5) * 16; // ~¬±8 rating at extremes
          r1 += advantage;
          r2 -= advantage;
          h2hNote = `${t1.name} ${h2h.team1Wins}‚Äì${h2h.team2Wins} ${t2.name}`;
        }
      }

      // Toss & decision impact
      let tossNote = '';
      const tossWinnerStats = tossWinner === 'team1' ? t1 : t2;
      const tossLoserStats = tossWinner === 'team1' ? t2 : t1;
      const tossWinnerKey = tossWinner === 'team1' ? team1Key : team2Key;

      if (tossDecision === 'bat') {
        // Reward defend strength when choosing to bat
        const boost = (tossWinnerStats.defendWinRate - 50) * 0.2 + 1.5;
        if (tossWinnerKey === team1Key) r1 += boost; else r2 += boost;
        tossNote = `${tossWinnerStats.name} chose to bat first (leans on defend win rate).`;
      } else {
        // Field first: reward chase strength
        const boost = (tossWinnerStats.chaseWinRate - 50) * 0.2 + 1.5;
        if (tossWinnerKey === team1Key) r1 += boost; else r2 += boost;
        tossNote = `${tossWinnerStats.name} chose to chase (leans on chase win rate).`;
      }

      // Slight regression so differences aren't extreme
      const avgBase = (r1 + r2) / 2;
      r1 = (r1 + avgBase) / 2;
      r2 = (r2 + avgBase) / 2;

      // Convert rating difference to win probabilities using logistic curve
      const diff = r1 - r2;
      let p1 = 1 / (1 + Math.pow(10, -diff / 20));
      let p2 = 1 - p1;

      p1 = clamp(p1 * 100, 5, 95);
      p2 = clamp(p2 * 100, 5, 95);

      // Normalise after clamping so total = 100
      const totalP = p1 + p2;
      p1 = (p1 / totalP) * 100;
      p2 = (p2 / totalP) * 100;

      const p1Rounded = Math.round(p1 * 10) / 10;
      const p2Rounded = Math.round(p2 * 10) / 10;

      const winner = p1Rounded >= p2Rounded ? t1 : t2;
      const loser = winner === t1 ? t2 : t1;
      const winnerProb = winner === t1 ? p1Rounded : p2Rounded;

      const winnerDisplay = document.getElementById('winnerDisplay');
      const prob1Name = document.getElementById('prob1Name');
      const prob2Name = document.getElementById('prob2Name');
      const prob1Bar = document.getElementById('prob1Bar');
      const prob2Bar = document.getElementById('prob2Bar');
      const factorsBreakdown = document.getElementById('factorsBreakdown');
      const resultsWrapper = document.getElementById('predictionResults');

      if (!winnerDisplay || !prob1Name || !prob2Name || !prob1Bar || !prob2Bar || !factorsBreakdown || !resultsWrapper) return;

      resultsWrapper.classList.remove('hidden');

      winnerDisplay.innerHTML = `
        <div class="inline-flex items-center gap-3 px-4 py-3 rounded-2xl bg-black/20 border border-yellow-400/50">
          <span class="text-2xl">üèÜ</span>
          <div class="text-left">
            <p class="text-xs text-gray-400 uppercase tracking-wide">Model favourite</p>
            <p class="text-lg font-bold" style="color:${winner.color}">${winner.name} <span class="text-sm text-gray-300">(${winnerProb.toFixed(1)}% win)</span></p>
          </div>
        </div>
      `;

      prob1Name.textContent = t1.name;
      prob2Name.textContent = t2.name;

      prob1Bar.style.width = p1Rounded + '%';
      prob2Bar.style.width = p2Rounded + '%';
      prob1Bar.textContent = p1Rounded.toFixed(1) + '%';
      prob2Bar.textContent = p2Rounded.toFixed(1) + '%';

      const breakdown = [];
      breakdown.push({
        label: 'All-time strength',
        value: `${t1.winRate.toFixed(1)}% vs ${t2.winRate.toFixed(1)}% win rate`
      });
      breakdown.push({
        label: 'Recent form index',
        value: `${t1.recentForm.toFixed(1)} vs ${t2.recentForm.toFixed(1)}`
      });
      breakdown.push({
        label: 'Titles & finals experience',
        value: `${t1.titles} vs ${t2.titles} titles ‚Ä¢ finals W% ${t1.finalsWinRate}% vs ${t2.finalsWinRate}%`
      });
      breakdown.push({
        label: 'Venue & conditions',
        value: `${venue.shortName} ‚Ä¢ Avg score ~${venue.avgScore} ‚Ä¢ ${venueNote}`
      });
      breakdown.push({
        label: 'Head-to-head',
        value: h2h ? h2hNote : 'Not a big historical sample'
      });
      breakdown.push({
        label: 'Toss scenario',
        value: tossNote
      });

      factorsBreakdown.innerHTML = breakdown.map(item => `
        <div class="flex items-start gap-2 text-xs">
          <span class="mt-[3px] w-1.5 h-1.5 rounded-full bg-yellow-400"></span>
          <div>
            <p class="font-semibold text-gray-100">${item.label}</p>
            <p class="text-gray-300">${item.value}</p>
          </div>
        </div>
      `).join('');

      // Link to Schedule: Save prediction if linked
      const matchSelector = document.getElementById('matchSelector');
      if (matchSelector && matchSelector.value) {
          const matchId = matchSelector.value;
          const predictedTeamNum = winner === t1 ? 1 : 2;
          // Note: winner.name comes from teamStats which matches the schedule names
          selectPrediction(matchId, predictedTeamNum, winner.name);
      }

      // Smooth scroll into view
      resultsWrapper.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // === Schedule Section Functions ===
    function calculateStandings() {
      const winners = getWinnersSchedule();
      const teamStatsTable = {};
      allTeamsSchedule.forEach(team => {
        teamStatsTable[team] = {
          team,
          pts: 0,
          gp: 0,
          w: 0,
          l: 0,
          t: 0,
          nr: 0,
          nrr: '+0.000'
        };
      });

      matches.forEach(match => {
        if (typeof match.match !== 'number') return; // ignore playoffs
        const matchId = `match_${match.match}`;
        const winner = winners[matchId];
        if (winner) {
          const winningTeam = winner.team === 1 ? match.team1 : match.team2;
          const losingTeam = winner.team === 1 ? match.team2 : match.team1;
          if (teamStatsTable[winningTeam]) {
            teamStatsTable[winningTeam].gp += 1;
            teamStatsTable[winningTeam].w += 1;
            teamStatsTable[winningTeam].pts += 2;
          }
          if (teamStatsTable[losingTeam]) {
            teamStatsTable[losingTeam].gp += 1;
            teamStatsTable[losingTeam].l += 1;
          }
        }
      });

      const standingsArray = Object.values(teamStatsTable);
      standingsArray.sort((a, b) => {
        if (b.pts !== a.pts) return b.pts - a.pts;
        if (b.w !== a.w) return b.w - a.w;
        const nrrA = parseFloat(a.nrr);
        const nrrB = parseFloat(b.nrr);
        return nrrB - nrrA;
      });

      standingsArray.forEach((team, index) => {
        team.pos = index + 1;
      });
      return standingsArray;
    }

    function getCompletedMatchesSchedule() {
      const saved = localStorage.getItem('bbl15_completed_matches');
      return saved ? JSON.parse(saved) : {};
    }
    function saveCompletedMatchesSchedule(completed) {
      localStorage.setItem('bbl15_completed_matches', JSON.stringify(completed));
    }
    function getPredictionsSchedule() {
      const saved = localStorage.getItem('bbl15_predictions');
      return saved ? JSON.parse(saved) : {};
    }
    function savePredictionsSchedule(predictions) {
      localStorage.setItem('bbl15_predictions', JSON.stringify(predictions));
    }
    function getWinnersSchedule() {
      const saved = localStorage.getItem('bbl15_winners');
      return saved ? JSON.parse(saved) : {};
    }
    function saveWinnersSchedule(winners) {
      localStorage.setItem('bbl15_winners', JSON.stringify(winners));
    }

    function toggleCompleted(matchId, element) {
      const completed = getCompletedMatchesSchedule();
      completed[matchId] = !completed[matchId];
      saveCompletedMatchesSchedule(completed);

      if (completed[matchId]) {
        element.classList.add('checked');
        element.querySelector('.checkmark').classList.remove('hidden');
        element.querySelector('.checkmark').classList.add('block');
        element.querySelector('span').classList.remove('text-gray-400');
        element.querySelector('span').classList.add('text-white');
        const checkbox = element.querySelector('.w-5');
        checkbox.classList.add('bg-white', 'border-white');
        checkbox.classList.remove('border-gray-400');
      } else {
        element.classList.remove('checked');
        element.querySelector('.checkmark').classList.add('hidden');
        element.querySelector('.checkmark').classList.remove('block');
        element.querySelector('span').classList.add('text-gray-400');
        element.querySelector('span').classList.remove('text-white');
        const checkbox = element.querySelector('.w-5');
        checkbox.classList.remove('bg-white', 'border-white');
        checkbox.classList.add('border-gray-400');
      }
    }

    function updateModelAccuracy() {
      const predictions = getPredictionsSchedule();
      const winners = getWinnersSchedule();
      let correct = 0;
      let total = 0;
      
      Object.keys(winners).forEach(matchId => {
        if (predictions[matchId] && winners[matchId]) {
          total++;
          if (predictions[matchId].team === winners[matchId].team) {
            correct++;
          }
        }
      });

      const container = document.getElementById('modelAccuracyContainer');
      const display = document.getElementById('modelAccuracyDisplay');
      const details = document.getElementById('modelAccuracyDetails');
      
      if (container && display && details) {
        if (total > 0) {
            const percentage = ((correct / total) * 100).toFixed(1);
            display.textContent = `${percentage}%`;
            details.textContent = `${correct}/${total} matches correct`;
            container.classList.remove('hidden');
        } else {
            container.classList.add('hidden');
        }
      }
    }

    function selectPrediction(matchId, team, teamName) {
      const predictions = getPredictionsSchedule();
      predictions[matchId] = { team, teamName };
      savePredictionsSchedule(predictions);

      const container = document.querySelector(`[data-match-id="${matchId}"]`);
      if (container) {
          const btn1 = container.querySelector('.pred-team1');
          const btn2 = container.querySelector('.pred-team2');

          if (btn1 && btn2) {
              btn1.classList.remove('bg-blue-600', 'ring-2', 'ring-blue-400');
              btn2.classList.remove('bg-blue-600', 'ring-2', 'ring-blue-400');
              btn1.classList.add('bg-gray-600');
              btn2.classList.add('bg-gray-600');

              if (team === 1) {
                btn1.classList.remove('bg-gray-600');
                btn1.classList.add('bg-blue-600', 'ring-2', 'ring-blue-400');
              } else {
                btn2.classList.remove('bg-gray-600');
                btn2.classList.add('bg-blue-600', 'ring-2', 'ring-blue-400');
              }
          }
      }
      updateResultDisplay(matchId);
      updateModelAccuracy();
    }

    function selectWinner(matchId, team, teamName) {
      const winners = getWinnersSchedule();
      winners[matchId] = { team, teamName };
      saveWinnersSchedule(winners);

      const container = document.querySelector(`[data-match-id="${matchId}"]`);
      if (container) {
          const btn1 = container.querySelector('.winner-team1');
          const btn2 = container.querySelector('.winner-team2');

          if (btn1 && btn2) {
              btn1.classList.remove('bg-green-600', 'ring-2', 'ring-green-400');
              btn2.classList.remove('bg-green-600', 'ring-2', 'ring-green-400');
              btn1.classList.add('bg-gray-600');
              btn2.classList.add('bg-gray-600');

              if (team === 1) {
                btn1.classList.remove('bg-gray-600');
                btn1.classList.add('bg-green-600', 'ring-2', 'ring-green-400');
              } else {
                btn2.classList.remove('bg-gray-600');
                btn2.classList.add('bg-green-600', 'ring-2', 'ring-green-400');
              }
          }
      }
      updateResultDisplay(matchId);
      renderStandingsSchedule();
      updateModelAccuracy();
    }

    function updateResultDisplay(matchId) {
      const predictions = getPredictionsSchedule();
      const winners = getWinnersSchedule();
      const container = document.querySelector(`[data-match-id="${matchId}"]`);
      if (!container) return;
      const resultDiv = container.querySelector('.result-display');
      if (!resultDiv) return;

      const prediction = predictions[matchId];
      const winner = winners[matchId];

      if (prediction && winner) {
        if (prediction.team === winner.team) {
          resultDiv.innerHTML = `
            <div class="result-success px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
              </svg>
              100% ‚úì
            </div>
          `;
        } else {
          resultDiv.innerHTML = `
            <div class="result-fail px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
              </svg>
              FAIL
            </div>
          `;
        }
      } else {
        resultDiv.innerHTML = `
          <div class="px-4 py-2 rounded-lg bg-gray-700 text-gray-400 font-medium">
            Awaiting Results
          </div>
        `;
      }
    }

    function formatDateSchedule(dateStr) {
      const date = new Date(dateStr);
      const options = { weekday: 'short', day: 'numeric', month: 'short', year: 'numeric' };
      return date.toLocaleDateString('en-AU', options);
    }

    function getTeamClassSchedule(team) {
      return teamColorsSchedule[team] || 'team-tbd';
    }

    function getTeamLogoSchedule(team) {
      return teamLogosSchedule[team] || 'üèè';
    }

    function createMatchCardSchedule(match, isPlayoff = false) {
      const matchId = typeof match.match === 'number' ? `match_${match.match}` : `match_${String(match.match).toLowerCase().replace(' ', '_')}`;
      const completedMatches = getCompletedMatchesSchedule();
      const predictions = getPredictionsSchedule();
      const winners = getWinnersSchedule();
      const isCompleted = completedMatches[matchId] || false;
      const prediction = predictions[matchId];
      const winner = winners[matchId];

      const card = document.createElement('div');
      card.className = `match-card bg-gray-900 rounded-xl overflow-hidden transition-all duration-300 ${isPlayoff ? 'playoff-card' : ''}`;
      card.setAttribute('data-match-id', matchId);

      const matchLabel = typeof match.match === 'number' ? `Match ${match.match}` : match.match;

      let resultHTML = `<div class=\"px-4 py-2 rounded-lg bg-gray-700 text-gray-400 font-medium\">Awaiting Results</div>`;
      if (prediction && winner) {
        if (prediction.team === winner.team) {
          resultHTML = `
            <div class=\"result-success px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2\">
              <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">
                <path fill-rule=\"evenodd\" d=\"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z\" clip-rule=\"evenodd\"></path>
              </svg>
              100% ‚úì
            </div>
          `;
        } else {
          resultHTML = `
            <div class=\"result-fail px-4 py-2 rounded-lg text-white font-bold flex items-center gap-2\">
              <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 20 20\">
                <path fill-rule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clip-rule=\"evenodd\"></path>
              </svg>
              FAIL
            </div>
          `;
        }
      }

      card.innerHTML = `
        <div class="flex flex-col md:flex-row">
          <div class="flex-1 p-4">
            <div class="flex items-center justify-between mb-3">
              <span class="px-3 py-1 ${isPlayoff ? 'bg-yellow-500/20 text-yellow-400' : 'bg-purple-500/20 text-purple-400'} rounded-full text-sm font-semibold">
                ${matchLabel}
              </span>
              ${isPlayoff ? '<span class="text-yellow-500">üèÜ</span>' : ''}
            </div>
            <div class="flex items-center gap-4">
              <div class="flex-1">
                <div class="flex items-center gap-3">
                  <div class="${getTeamClassSchedule(match.team1)} w-12 h-12 rounded-full flex items-center justify-center text-xl shadow-lg">
                    ${getTeamLogoSchedule(match.team1)}
                  </div>
                  <div>
                    <p class="font-semibold text-white">${match.team1}</p>
                  </div>
                </div>
              </div>
              <div class="px-4">
                <span class="text-2xl font-bold text-gray-500">VS</span>
              </div>
              <div class="flex-1 text-right">
                <div class="flex items-center gap-3 justify-end">
                  <div>
                    <p class="font-semibold text-white">${match.team2}</p>
                  </div>
                  <div class="${getTeamClassSchedule(match.team2)} w-12 h-12 rounded-full flex items-center justify-center text-xl shadow-lg">
                    ${getTeamLogoSchedule(match.team2)}
                  </div>
                </div>
              </div>
            </div>
            <div class="mt-4 pt-4 border-t border-gray-700">
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div>
                  <p class="text-xs text-gray-500 mb-2 uppercase tracking-wide">Status</p>
                  <div class="completed-checkbox flex items-center gap-2 w-fit px-3 py-2 rounded-lg bg-gray-700 border-2 border-gray-600 ${isCompleted ? 'checked' : ''}" 
                    onclick="toggleCompleted('${matchId}', this)">
                    <div class="w-5 h-5 rounded border-2 ${isCompleted ? 'bg-white border-white' : 'border-gray-400'} flex items-center justify-center">
                      <svg class="checkmark w-3 h-3 text-red-600 ${isCompleted ? 'block' : 'hidden'}" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                      </svg>
                    </div>
                    <span class="text-sm font-medium ${isCompleted ? 'text-white' : 'text-gray-400'}">Completed</span>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-gray-500 mb-2 uppercase tracking-wide">ü§ñ Model Prediction</p>
                  <div class="flex gap-2">
                    <button class="pred-team1 prediction-btn px-3 py-2 rounded-lg text-xs font-semibold text-white ${prediction && prediction.team === 1 ? 'bg-blue-600 ring-2 ring-blue-400' : 'bg-gray-600'} hover:bg-blue-500"
                      onclick="selectPrediction('${matchId}', 1, '${match.team1.replace(/'/g, "\\'")}')">
                      ${match.team1.split(' ').pop()}
                    </button>
                    <button class="pred-team2 prediction-btn px-3 py-2 rounded-lg text-xs font-semibold text-white ${prediction && prediction.team === 2 ? 'bg-blue-600 ring-2 ring-blue-400' : 'bg-gray-600'} hover:bg-blue-500"
                      onclick="selectPrediction('${matchId}', 2, '${match.team2.replace(/'/g, "\\'")}')">
                      ${match.team2.split(' ').pop()}
                    </button>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-gray-500 mb-2 uppercase tracking-wide">üèÜ Post Match Winner</p>
                  <div class="flex gap-2">
                    <button class="winner-team1 prediction-btn px-3 py-2 rounded-lg text-xs font-semibold text-white ${winner && winner.team === 1 ? 'bg-green-600 ring-2 ring-green-400' : 'bg-gray-600'} hover:bg-green-500"
                      onclick="selectWinner('${matchId}', 1, '${match.team1.replace(/'/g, "\\'")}')">
                      ${match.team1.split(' ').pop()}
                    </button>
                    <button class="winner-team2 prediction-btn px-3 py-2 rounded-lg text-xs font-semibold text-white ${winner && winner.team === 2 ? 'bg-green-600 ring-2 ring-green-400' : 'bg-gray-600'} hover:bg-green-500"
                      onclick="selectWinner('${matchId}', 2, '${match.team2.replace(/'/g, "\\'")}')">
                      ${match.team2.split(' ').pop()}
                    </button>
                  </div>
                </div>
                <div>
                  <p class="text-xs text-gray-500 mb-2 uppercase tracking-wide">üìä Result</p>
                  <div class="result-display">
                    ${resultHTML}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
      return card;
    }

    function renderMatchesSchedule(filteredMatches) {
      const container = document.getElementById('matchesContainer');
      if (!container) return;
      container.innerHTML = '';

      let currentDate = '';
      const regularMatches = filteredMatches.filter(m => !m.isPlayoff);
      const playoffMatches = filteredMatches.filter(m => m.isPlayoff);

      if (regularMatches.length > 0) {
        const sectionHeader = document.createElement('div');
        sectionHeader.className = 'mb-4 mt-6';
        sectionHeader.innerHTML = `
          <h2 class="text-2xl font-bold text-white flex items-center gap-2">
            <span class="w-2 h-8 bg-gradient-to-b from-purple-500 to-blue-500 rounded-full"></span>
            Regular Season
          </h2>
        `;
        container.appendChild(sectionHeader);

        regularMatches.forEach(match => {
          const dateStr = formatDateSchedule(match.date);
          if (dateStr !== currentDate) {
            currentDate = dateStr;
            const dateHeader = document.createElement('div');
            dateHeader.className = 'mt-6 mb-3 flex items-center gap-3';
            dateHeader.innerHTML = `
              <div class="w-3 h-3 bg-purple-500 rounded-full"></div>
              <span class="text-lg font-semibold text-purple-400">${dateStr}</span>
              <div class="flex-1 h-px bg-gray-700"></div>
            `;
            container.appendChild(dateHeader);
          }
          container.appendChild(createMatchCardSchedule(match));
        });
      }

      if (playoffMatches.length > 0) {
        const sectionHeader = document.createElement('div');
        sectionHeader.className = 'mb-4 mt-10';
        sectionHeader.innerHTML = `
          <h2 class="text-2xl font-bold text-white flex items-center gap-2">
            <span class="w-2 h-8 bg-gradient-to-b from-yellow-500 to-orange-500 rounded-full"></span>
            Playoffs
            <span class="ml-2 text-yellow-500">üèÜ</span>
          </h2>
        `;
        container.appendChild(sectionHeader);

        currentDate = '';
        playoffMatches.forEach(match => {
          const dateStr = formatDateSchedule(match.date);
          if (dateStr !== currentDate) {
            currentDate = dateStr;
            const dateHeader = document.createElement('div');
            dateHeader.className = 'mt-6 mb-3 flex items-center gap-3';
            dateHeader.innerHTML = `
              <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
              <span class="text-lg font-semibold text-yellow-400">${dateStr}</span>
              <div class="flex-1 h-px bg-gray-700"></div>
            `;
            container.appendChild(dateHeader);
          }
          container.appendChild(createMatchCardSchedule(match, true));
        });
      }

      const matchCountEl = document.getElementById('matchCount');
      if (matchCountEl) matchCountEl.textContent = `${filteredMatches.length} matches`;
    }

    function applyFilters() {
      const teamFilter = document.getElementById('teamFilter').value;
      const typeFilter = document.getElementById('typeFilter').value;
      let filtered = matches.slice();

      if (teamFilter !== 'all') {
        filtered = filtered.filter(m => m.team1 === teamFilter || m.team2 === teamFilter);
      }
      if (typeFilter === 'regular') {
        filtered = filtered.filter(m => !m.isPlayoff);
      } else if (typeFilter === 'playoffs') {
        filtered = filtered.filter(m => m.isPlayoff);
      }
      renderMatchesSchedule(filtered);
    }

    function renderStandingsSchedule() {
      const tbody = document.getElementById('standingsBody');
      if (!tbody) return;
      tbody.innerHTML = '';

      const standings = calculateStandings();
      const teamNameToCode = {
        "Perth Scorchers": "SCO",
        "Sydney Sixers": "SIX",
        "Melbourne Renegades": "REN",
        "Brisbane Heat": "HEA",
        "Hobart Hurricanes": "HUR",
        "Sydney Thunder": "THU",
        "Adelaide Strikers": "STR",
        "Melbourne Stars": "STA"
      };

      standings.forEach(team => {
        const fullName = team.team;
        const teamCode = teamNameToCode[fullName] || '???';
        const teamClass = teamColorsSchedule[fullName] || 'team-tbd';
        const teamLogo = teamLogosSchedule[fullName] || 'üèè';
        const isPlayoffSpot = team.pos <= 4;
        const row = document.createElement('tr');
        row.className = `border-b border-gray-700/50 hover:bg-gray-700/30 transition-colors ${isPlayoffSpot ? 'bg-green-900/10' : ''}`;
        const nrrClass = team.nrr.startsWith('+') ? 'text-green-400' : (team.nrr.startsWith('-') ? 'text-red-400' : 'text-gray-400');
        row.innerHTML = `
          <td class="px-3 py-4">
            <span class="w-6 h-6 rounded-full ${isPlayoffSpot ? 'bg-green-500' : 'bg-gray-600'} inline-flex items-center justify-center text-xs font-bold text-white">
              ${team.pos}
            </span>
          </td>
          <td class="px-3 py-4">
            <div class="flex items-center gap-3">
              <div class="${teamClass} w-8 h-8 rounded-full flex items-center justify-center text-sm shadow-lg">
                ${teamLogo}
              </div>
              <div>
                <p class="font-semibold text-white">${fullName}</p>
                <p class="text-xs text-gray-500">${teamCode}</p>
              </div>
            </div>
          </td>
          <td class="px-3 py-4 text-center text-gray-300">${team.gp}</td>
          <td class="px-3 py-4 text-center text-green-400 font-semibold">${team.w}</td>
          <td class="px-3 py-4 text-center text-red-400 font-semibold">${team.l}</td>
          <td class="px-3 py-4 text-center text-gray-300">${team.t}</td>
          <td class="px-3 py-4 text-center text-gray-300">${team.nr}</td>
          <td class="px-3 py-4 text-center">
            <span class="bg-purple-500/20 text-purple-400 px-2 py-1 rounded-full font-bold">${team.pts}</span>
          </td>
          <td class="px-3 py-4 text-center ${nrrClass} font-mono font-semibold">${team.nrr}</td>
        `;
        tbody.appendChild(row);
      });
    }

    // === DOMContentLoaded ===
    document.addEventListener('DOMContentLoaded', () => {
      // Dashboard init
      initMatchSelector();
      renderSquads();
      renderChampions();
      recalcPowerRankings();
      setTimeout(fillProgressBars, 250);

      // Schedule init
      renderStandingsSchedule();
      renderMatchesSchedule(matches);
      updateModelAccuracy();

      // Predictor events
      const team1Sel = document.getElementById('team1');
      const team2Sel = document.getElementById('team2');
      const predictBtn = document.getElementById('predictBtn');
      const recalcBtn = document.getElementById('recalcRankings');

      if (team1Sel) team1Sel.addEventListener('change', () => updateTeamDisplay('team1', 'team1Stats'));
      if (team2Sel) team2Sel.addEventListener('change', () => updateTeamDisplay('team2', 'team2Stats'));
      if (predictBtn) predictBtn.addEventListener('click', predictMatch);
      if (recalcBtn) recalcBtn.addEventListener('click', recalcPowerRankings);

      // Schedule filters
      const teamFilter = document.getElementById('teamFilter');
      const typeFilter = document.getElementById('typeFilter');
      if (teamFilter) teamFilter.addEventListener('change', applyFilters);
      if (typeFilter) typeFilter.addEventListener('change', applyFilters);

      // IntersectionObserver for charts & counters
      const observer = new IntersectionObserver((entries, obs) => {
        for (const entry of entries) {
          if (!entry.isIntersecting) continue;
          if (entry.target.id === 'stats') {
            animateCounters();
            initStatsCharts();
          }
          if (entry.target.id === 'trends') {
            initTrendCharts();
          }
          obs.unobserve(entry.target);
        }
      }, { threshold: 0.18 });

      const statsEl = document.getElementById('stats');
      const trendsEl = document.getElementById('trends');
      if (statsEl) observer.observe(statsEl);
      if (trendsEl) observer.observe(trendsEl);
    });
  </script>
</body>
</html>
